var Microsoft;!function(e){var t;!function(e){!function(e){e[e.CRITICAL=0]="CRITICAL",e[e.WARNING=1]="WARNING"}(e.LoggingSeverity||(e.LoggingSeverity={}));var t=e.LoggingSeverity;!function(e){e[e.NONUSRACT_BrowserDoesNotSupportLocalStorage=0]="NONUSRACT_BrowserDoesNotSupportLocalStorage",e[e.NONUSRACT_BrowserCannotReadLocalStorage=1]="NONUSRACT_BrowserCannotReadLocalStorage",e[e.NONUSRACT_BrowserCannotReadSessionStorage=2]="NONUSRACT_BrowserCannotReadSessionStorage",e[e.NONUSRACT_BrowserCannotWriteLocalStorage=3]="NONUSRACT_BrowserCannotWriteLocalStorage",e[e.NONUSRACT_BrowserCannotWriteSessionStorage=4]="NONUSRACT_BrowserCannotWriteSessionStorage",e[e.NONUSRACT_BrowserFailedRemovalFromLocalStorage=5]="NONUSRACT_BrowserFailedRemovalFromLocalStorage",e[e.NONUSRACT_BrowserFailedRemovalFromSessionStorage=6]="NONUSRACT_BrowserFailedRemovalFromSessionStorage",e[e.NONUSRACT_CannotSendEmptyTelemetry=7]="NONUSRACT_CannotSendEmptyTelemetry",e[e.NONUSRACT_ClientPerformanceMathError=8]="NONUSRACT_ClientPerformanceMathError",e[e.NONUSRACT_ErrorParsingAISessionCookie=9]="NONUSRACT_ErrorParsingAISessionCookie",e[e.NONUSRACT_ErrorPVCalc=10]="NONUSRACT_ErrorPVCalc",e[e.NONUSRACT_ExceptionWhileLoggingError=11]="NONUSRACT_ExceptionWhileLoggingError",e[e.NONUSRACT_FailedAddingTelemetryToBuffer=12]="NONUSRACT_FailedAddingTelemetryToBuffer",e[e.NONUSRACT_FailedMonitorAjaxAbort=13]="NONUSRACT_FailedMonitorAjaxAbort",e[e.NONUSRACT_FailedMonitorAjaxDur=14]="NONUSRACT_FailedMonitorAjaxDur",e[e.NONUSRACT_FailedMonitorAjaxOpen=15]="NONUSRACT_FailedMonitorAjaxOpen",e[e.NONUSRACT_FailedMonitorAjaxRSC=16]="NONUSRACT_FailedMonitorAjaxRSC",e[e.NONUSRACT_FailedMonitorAjaxSend=17]="NONUSRACT_FailedMonitorAjaxSend",e[e.NONUSRACT_FailedToAddHandlerForOnBeforeUnload=18]="NONUSRACT_FailedToAddHandlerForOnBeforeUnload",e[e.NONUSRACT_FailedToSendQueuedTelemetry=19]="NONUSRACT_FailedToSendQueuedTelemetry",e[e.NONUSRACT_FailedToReportDataLoss=20]="NONUSRACT_FailedToReportDataLoss",e[e.NONUSRACT_FlushFailed=21]="NONUSRACT_FlushFailed",e[e.NONUSRACT_MessageLimitPerPVExceeded=22]="NONUSRACT_MessageLimitPerPVExceeded",e[e.NONUSRACT_MissingRequiredFieldSpecification=23]="NONUSRACT_MissingRequiredFieldSpecification",e[e.NONUSRACT_NavigationTimingNotSupported=24]="NONUSRACT_NavigationTimingNotSupported",e[e.NONUSRACT_OnError=25]="NONUSRACT_OnError",e[e.NONUSRACT_SessionRenewalDateIsZero=26]="NONUSRACT_SessionRenewalDateIsZero",e[e.NONUSRACT_SenderNotInitialized=27]="NONUSRACT_SenderNotInitialized",e[e.NONUSRACT_StartTrackEventFailed=28]="NONUSRACT_StartTrackEventFailed",e[e.NONUSRACT_StopTrackEventFailed=29]="NONUSRACT_StopTrackEventFailed",e[e.NONUSRACT_StartTrackFailed=30]="NONUSRACT_StartTrackFailed",e[e.NONUSRACT_StopTrackFailed=31]="NONUSRACT_StopTrackFailed",e[e.NONUSRACT_TelemetrySampledAndNotSent=32]="NONUSRACT_TelemetrySampledAndNotSent",e[e.NONUSRACT_TrackEventFailed=33]="NONUSRACT_TrackEventFailed",e[e.NONUSRACT_TrackExceptionFailed=34]="NONUSRACT_TrackExceptionFailed",e[e.NONUSRACT_TrackMetricFailed=35]="NONUSRACT_TrackMetricFailed",e[e.NONUSRACT_TrackPVFailed=36]="NONUSRACT_TrackPVFailed",e[e.NONUSRACT_TrackPVFailedCalc=37]="NONUSRACT_TrackPVFailedCalc",e[e.NONUSRACT_TrackTraceFailed=38]="NONUSRACT_TrackTraceFailed",e[e.NONUSRACT_TransmissionFailed=39]="NONUSRACT_TransmissionFailed",e[e.USRACT_CannotSerializeObject=40]="USRACT_CannotSerializeObject",e[e.USRACT_CannotSerializeObjectNonSerializable=41]="USRACT_CannotSerializeObjectNonSerializable",e[e.USRACT_CircularReferenceDetected=42]="USRACT_CircularReferenceDetected",e[e.USRACT_ClearAuthContextFailed=43]="USRACT_ClearAuthContextFailed",e[e.USRACT_ExceptionTruncated=44]="USRACT_ExceptionTruncated",e[e.USRACT_IllegalCharsInName=45]="USRACT_IllegalCharsInName",e[e.USRACT_ItemNotInArray=46]="USRACT_ItemNotInArray",e[e.USRACT_MaxAjaxPerPVExceeded=47]="USRACT_MaxAjaxPerPVExceeded",e[e.USRACT_MessageTruncated=48]="USRACT_MessageTruncated",e[e.USRACT_NameTooLong=49]="USRACT_NameTooLong",e[e.USRACT_SampleRateOutOfRange=50]="USRACT_SampleRateOutOfRange",e[e.USRACT_SetAuthContextFailed=51]="USRACT_SetAuthContextFailed",e[e.USRACT_SetAuthContextFailedAccountName=52]="USRACT_SetAuthContextFailedAccountName",e[e.USRACT_StringValueTooLong=53]="USRACT_StringValueTooLong",e[e.USRACT_StartCalledMoreThanOnce=54]="USRACT_StartCalledMoreThanOnce",e[e.USRACT_StopCalledWithoutStart=55]="USRACT_StopCalledWithoutStart",e[e.USRACT_TelemetryInitializerFailed=56]="USRACT_TelemetryInitializerFailed",e[e.USRACT_TrackArgumentsNotSpecified=57]="USRACT_TrackArgumentsNotSpecified",e[e.USRACT_UrlTooLong=58]="USRACT_UrlTooLong"}(e._InternalMessageId||(e._InternalMessageId={}));var n=e._InternalMessageId,i=function(){function e(t,i,a){this.message=n[t].toString(),this.messageId=t;var o=(i?" message:"+e.sanitizeDiagnosticText(i):"")+(a?" props:"+e.sanitizeDiagnosticText(JSON.stringify(a)):"");this.message+=o}return e.sanitizeDiagnosticText=function(e){return'"'+e.replace(/\"/g,"")+'"'},e}();e._InternalLogMessage=i;var a=function(){function a(){}return a.throwInternalNonUserActionable=function(e,t){if(this.enableDebugExceptions())throw t;"undefined"!=typeof t&&t&&"undefined"!=typeof t.message&&(t.message=this.AiNonUserActionablePrefix+t.message,this.warnToConsole(t.message),this.logInternalMessage(e,t))},a.throwInternalUserActionable=function(e,t){if(this.enableDebugExceptions())throw t;"undefined"!=typeof t&&t&&"undefined"!=typeof t.message&&(t.message=this.AiUserActionablePrefix+t.message,this.warnToConsole(t.message),this.logInternalMessage(e,t))},a.warnToConsole=function(e){"undefined"!=typeof console&&console&&("function"==typeof console.warn?console.warn(e):"function"==typeof console.log&&console.log(e))},a.resetInternalMessageCount=function(){this._messageCount=0},a.clearInternalMessageLoggedTypes=function(){if(e.Util.canUseSessionStorage())for(var t=e.Util.getSessionStorageKeys(),n=0;n<t.length;n++)0===t[n].indexOf(a.AIInternalMessagePrefix)&&e.Util.removeSessionStorage(t[n])},a.setMaxInternalMessageLimit=function(e){if(!e)throw new Error("limit cannot be undefined.");this.MAX_INTERNAL_MESSAGE_LIMIT=e},a.logInternalMessage=function(o,r){if(!this._areInternalMessagesThrottled()){var s=!0;if(e.Util.canUseSessionStorage()){var l=a.AIInternalMessagePrefix+n[r.messageId],c=e.Util.getSessionStorage(l);c?s=!1:e.Util.setSessionStorage(l,"1")}if(s&&((this.verboseLogging()||o===t.CRITICAL)&&(this.queue.push(r),this._messageCount++),this._messageCount==this.MAX_INTERNAL_MESSAGE_LIMIT)){var g="Internal events throttle limit per PageView reached for this app.",u=new i(n.NONUSRACT_MessageLimitPerPVExceeded,g);this.queue.push(u),this.warnToConsole(g)}}},a._areInternalMessagesThrottled=function(){return this._messageCount>=this.MAX_INTERNAL_MESSAGE_LIMIT},a.AiUserActionablePrefix="AI: ",a.AIInternalMessagePrefix="AITR_",a.AiNonUserActionablePrefix="AI (Internal): ",a.enableDebugExceptions=function(){return!1},a.verboseLogging=function(){return!1},a.queue=[],a.MAX_INTERNAL_MESSAGE_LIMIT=25,a._messageCount=0,a}();e._InternalLogging=a}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){var t;!function(e){e[e.LocalStorage=0]="LocalStorage",e[e.SessionStorage=1]="SessionStorage"}(t||(t={}));var n=function(){function n(){}return n._getLocalStorageObject=function(){return n._getVerifiedStorageObject(t.LocalStorage)},n._getVerifiedStorageObject=function(e){var n,i,a=null;try{i=new Date,a=e===t.LocalStorage?window.localStorage:window.sessionStorage,a.setItem(i,i),n=a.getItem(i)!=i,a.removeItem(i),n&&(a=null)}catch(e){a=null}return a},n.canUseLocalStorage=function(){return!!n._getLocalStorageObject()},n.getStorage=function(t){var i=n._getLocalStorageObject();if(null!==i)try{return i.getItem(t)}catch(t){var a=new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_BrowserCannotReadLocalStorage,"Browser failed read of local storage. "+n.getExceptionName(t),{exception:n.dump(t)});e._InternalLogging.throwInternalNonUserActionable(e.LoggingSeverity.WARNING,a)}return null},n.setStorage=function(t,i){var a=n._getLocalStorageObject();if(null!==a)try{return a.setItem(t,i),!0}catch(t){var o=new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_BrowserCannotWriteLocalStorage,"Browser failed write to local storage. "+n.getExceptionName(t),{exception:n.dump(t)});e._InternalLogging.throwInternalNonUserActionable(e.LoggingSeverity.WARNING,o)}return!1},n.removeStorage=function(t){var i=n._getLocalStorageObject();if(null!==i)try{return i.removeItem(t),!0}catch(t){var a=new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_BrowserFailedRemovalFromLocalStorage,"Browser failed removal of local storage item. "+n.getExceptionName(t),{exception:n.dump(t)});e._InternalLogging.throwInternalNonUserActionable(e.LoggingSeverity.WARNING,a)}return!1},n._getSessionStorageObject=function(){return n._getVerifiedStorageObject(t.SessionStorage)},n.canUseSessionStorage=function(){return!!n._getSessionStorageObject()},n.getSessionStorageKeys=function(){var e=[];if(n.canUseSessionStorage())for(var t in window.sessionStorage)e.push(t);return e},n.getSessionStorage=function(t){var i=n._getSessionStorageObject();if(null!==i)try{return i.getItem(t)}catch(t){var a=new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_BrowserCannotReadSessionStorage,"Browser failed read of session storage. "+n.getExceptionName(t),{exception:n.dump(t)});e._InternalLogging.throwInternalNonUserActionable(e.LoggingSeverity.CRITICAL,a)}return null},n.setSessionStorage=function(t,i){var a=n._getSessionStorageObject();if(null!==a)try{return a.setItem(t,i),!0}catch(t){var o=new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_BrowserCannotWriteSessionStorage,"Browser failed write to session storage. "+n.getExceptionName(t),{exception:n.dump(t)});e._InternalLogging.throwInternalNonUserActionable(e.LoggingSeverity.CRITICAL,o)}return!1},n.removeSessionStorage=function(t){var i=n._getSessionStorageObject();if(null!==i)try{return i.removeItem(t),!0}catch(t){var a=new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_BrowserFailedRemovalFromSessionStorage,"Browser failed removal of session storage item. "+n.getExceptionName(t),{exception:n.dump(t)});e._InternalLogging.throwInternalNonUserActionable(e.LoggingSeverity.CRITICAL,a)}return!1},n.setCookie=function(e,t,i){var a="";i&&(a=";domain="+i),n.document.cookie=e+"="+t+a+";path=/"},n.stringToBoolOrDefault=function(e){return!!e&&"true"===e.toString().toLowerCase()},n.getCookie=function(e){var t="";if(e&&e.length)for(var i=e+"=",a=n.document.cookie.split(";"),o=0;o<a.length;o++){var r=a[o];if(r=n.trim(r),r&&0===r.indexOf(i)){t=r.substring(i.length,a[o].length);break}}return t},n.deleteCookie=function(e){n.document.cookie=e+"=;path=/;expires=Thu, 01 Jan 1970 00:00:01 GMT;"},n.trim=function(e){return"string"!=typeof e?e:e.replace(/^\s+|\s+$/g,"")},n.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t="",n=1073741824*Math.random();n>0;){var i=e.charAt(n%64);t+=i,n=Math.floor(n/64)}return t},n.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},n.isError=function(e){return"[object Error]"===Object.prototype.toString.call(e)},n.isDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)},n.toISOStringForIE8=function(e){function t(e){var t=String(e);return 1===t.length&&(t="0"+t),t}if(n.isDate(e))return Date.prototype.toISOString?e.toISOString():e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+String((e.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"},n.getIEVersion=function(e){void 0===e&&(e=null);var t=e?e.toLowerCase():navigator.userAgent.toLowerCase();return t.indexOf("msie")!=-1?parseInt(t.split("msie")[1]):null},n.msToTimeSpan=function(e){(isNaN(e)||e<0)&&(e=0);var t=""+e%1e3,n=""+Math.floor(e/1e3)%60,i=""+Math.floor(e/6e4)%60,a=""+Math.floor(e/36e5)%24;return t=1===t.length?"00"+t:2===t.length?"0"+t:t,n=n.length<2?"0"+n:n,i=i.length<2?"0"+i:i,a=a.length<2?"0"+a:a,a+":"+i+":"+n+"."+t},n.isCrossOriginError=function(e,t,n,i,a){return("Script error."===e||"Script error"===e)&&null===a},n.dump=function(e){var t=Object.prototype.toString.call(e),n=JSON.stringify(e);return"[object Error]"===t&&(n="{ stack: '"+e.stack+"', message: '"+e.message+"', name: '"+e.name+"'"),t+n},n.getExceptionName=function(e){var t=Object.prototype.toString.call(e);return"[object Error]"===t?e.name:""},n.addEventHandler=function(e,t){if(!window||"string"!=typeof e||"function"!=typeof t)return!1;var n="on"+e;if(window.addEventListener)window.addEventListener(e,t,!1);else{if(!window.attachEvent)return!1;window.attachEvent.call(n,t)}return!0},n.document="undefined"!=typeof document?document:{},n.NotSpecified="not_specified",n}();e.Util=n;var i=function(){function e(){}return e.parseUrl=function(t){return e.htmlAnchorElement||(e.htmlAnchorElement=e.document.createElement("a")),e.htmlAnchorElement.href=t,e.htmlAnchorElement},e.getAbsoluteUrl=function(t){var n,i=e.parseUrl(t);return i&&(n=i.href),n},e.getPathName=function(t){var n,i=e.parseUrl(t);return i&&(n=i.pathname),n},e.document="undefined"!=typeof document?document:{},e}();e.UrlHelper=i}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){"use strict";var t=function(){function e(){}return e.IsNullOrUndefined=function(e){return"undefined"==typeof e||null===e},e}();e.extensions=t;var n=function(){function e(){}return e.GetLength=function(e){var n=0;if(!t.IsNullOrUndefined(e)){var i="";try{i=e.toString()}catch(e){}n=i.length,n=isNaN(n)?0:n}return n},e}();e.stringUtils=n;var i=function(){function e(){}return e.Now=window.performance&&window.performance.now?function(){return performance.now()}:function(){return(new Date).getTime()},e.GetDuration=function(e,n){var i=null;return 0===e||0===n||t.IsNullOrUndefined(e)||t.IsNullOrUndefined(n)||(i=n-e),i},e}();e.dateTime=i;var a=function(){function e(){}return e.AttachEvent=function(e,n,i){var a=!1;return t.IsNullOrUndefined(e)||(t.IsNullOrUndefined(e.attachEvent)?t.IsNullOrUndefined(e.addEventListener)||(e.addEventListener(n,i,!1),a=!0):(e.attachEvent("on"+n,i),a=!0)),a},e.DetachEvent=function(e,n,i){t.IsNullOrUndefined(e)||(t.IsNullOrUndefined(e.detachEvent)?t.IsNullOrUndefined(e.removeEventListener)||e.removeEventListener(n,i,!1):e.detachEvent("on"+n,i))},e}();e.EventHelper=a}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){"use strict";var t=function(){function e(){this.openDone=!1,this.setRequestHeaderDone=!1,this.sendDone=!1,this.abortDone=!1,this.onreadystatechangeCallbackAttached=!1}return e}();e.XHRMonitoringState=t;var n=function(){function n(n){this.completed=!1,this.requestHeadersSize=null,this.ttfb=null,this.responseReceivingDuration=null,this.callbackDuration=null,this.ajaxTotalDuration=null,this.aborted=null,this.pageUrl=null,this.requestUrl=null,this.requestSize=0,this.method=null,this.status=null,this.requestSentTime=null,this.responseStartedTime=null,this.responseFinishedTime=null,this.callbackFinishedTime=null,this.endTime=null,this.originalOnreadystatechage=null,this.xhrMonitoringState=new t,this.clientFailure=0,this.CalculateMetrics=function(){var t=this;t.ajaxTotalDuration=e.dateTime.GetDuration(t.requestSentTime,t.responseFinishedTime)},this.id=n}return n.prototype.getAbsoluteUrl=function(){return this.requestUrl?e.UrlHelper.getAbsoluteUrl(this.requestUrl):null},n.prototype.getPathName=function(){return this.requestUrl?e.UrlHelper.getPathName(this.requestUrl):null},n}();e.ajaxRecord=n}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(t){"use strict";var n=function(){function n(e){this.currentWindowHost=window.location.host,this.appInsights=e,this.initialized=!1,this.Init()}return n.prototype.Init=function(){this.supportsMonitoring()&&(this.instrumentOpen(),this.instrumentSend(),this.instrumentAbort(),this.initialized=!0)},n.prototype.isMonitoredInstance=function(e,i){return this.initialized&&(i===!0||!t.extensions.IsNullOrUndefined(e.ajaxData))&&e[n.DisabledPropertyName]!==!0},n.prototype.supportsMonitoring=function(){var e=!1;return t.extensions.IsNullOrUndefined(XMLHttpRequest)||(e=!0),e},n.prototype.instrumentOpen=function(){var i=XMLHttpRequest.prototype.open,a=this;XMLHttpRequest.prototype.open=function(o,r,s){try{!a.isMonitoredInstance(this,!0)||this.ajaxData&&this.ajaxData.xhrMonitoringState.openDone||a.openHandler(this,o,r,s)}catch(i){t._InternalLogging.throwInternalNonUserActionable(t.LoggingSeverity.CRITICAL,new t._InternalLogMessage(t._InternalMessageId.NONUSRACT_FailedMonitorAjaxOpen,"Failed to monitor XMLHttpRequest.open, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:n.getFailedAjaxDiagnosticsMessage(this),exception:e.ApplicationInsights.Util.dump(i)}))}return i.apply(this,arguments)}},n.prototype.openHandler=function(e,n,i,a){var o=new t.ajaxRecord(t.Util.newId());o.method=n,o.requestUrl=i,o.xhrMonitoringState.openDone=!0,e.ajaxData=o,this.attachToOnReadyStateChange(e)},n.getFailedAjaxDiagnosticsMessage=function(e){var n="";try{t.extensions.IsNullOrUndefined(e)||t.extensions.IsNullOrUndefined(e.ajaxData)||t.extensions.IsNullOrUndefined(e.ajaxData.requestUrl)||(n+="(url: '"+e.ajaxData.requestUrl+"')")}catch(e){}return n},n.prototype.instrumentSend=function(){var i=XMLHttpRequest.prototype.send,a=this;XMLHttpRequest.prototype.send=function(o){try{a.isMonitoredInstance(this)&&!this.ajaxData.xhrMonitoringState.sendDone&&a.sendHandler(this,o)}catch(i){t._InternalLogging.throwInternalNonUserActionable(t.LoggingSeverity.CRITICAL,new t._InternalLogMessage(t._InternalMessageId.NONUSRACT_FailedMonitorAjaxSend,"Failed to monitor XMLHttpRequest, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:n.getFailedAjaxDiagnosticsMessage(this),exception:e.ApplicationInsights.Util.dump(i)}))}return i.apply(this,arguments)}},n.prototype.sendHandler=function(e,n){e.ajaxData.requestSentTime=t.dateTime.Now(),this.appInsights.config.disableCorrelationHeaders||t.UrlHelper.parseUrl(e.ajaxData.getAbsoluteUrl()).host!=this.currentWindowHost||e.setRequestHeader("x-ms-request-id",e.ajaxData.id),e.ajaxData.xhrMonitoringState.sendDone=!0},n.prototype.instrumentAbort=function(){var i=XMLHttpRequest.prototype.abort,a=this;XMLHttpRequest.prototype.abort=function(){try{a.isMonitoredInstance(this)&&!this.ajaxData.xhrMonitoringState.abortDone&&(this.ajaxData.aborted=1,this.ajaxData.xhrMonitoringState.abortDone=!0)}catch(i){t._InternalLogging.throwInternalNonUserActionable(t.LoggingSeverity.CRITICAL,new t._InternalLogMessage(t._InternalMessageId.NONUSRACT_FailedMonitorAjaxAbort,"Failed to monitor XMLHttpRequest.abort, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:n.getFailedAjaxDiagnosticsMessage(this),exception:e.ApplicationInsights.Util.dump(i)}))}return i.apply(this,arguments)}},n.prototype.attachToOnReadyStateChange=function(i){var a=this;i.ajaxData.xhrMonitoringState.onreadystatechangeCallbackAttached=t.EventHelper.AttachEvent(i,"readystatechange",function(){try{a.isMonitoredInstance(i)&&4===i.readyState&&a.onAjaxComplete(i)}catch(a){var o=e.ApplicationInsights.Util.dump(a);o&&o.toLowerCase().indexOf("c00c023f")!=-1||t._InternalLogging.throwInternalNonUserActionable(t.LoggingSeverity.CRITICAL,new t._InternalLogMessage(t._InternalMessageId.NONUSRACT_FailedMonitorAjaxRSC,"Failed to monitor XMLHttpRequest 'readystatechange' event handler, monitoring data for this ajax call may be incorrect.",{ajaxDiagnosticsMessage:n.getFailedAjaxDiagnosticsMessage(i),exception:e.ApplicationInsights.Util.dump(a)}))}})},n.prototype.onAjaxComplete=function(e){e.ajaxData.responseFinishedTime=t.dateTime.Now(),e.ajaxData.status=e.status,e.ajaxData.CalculateMetrics(),e.ajaxData.ajaxTotalDuration<0?t._InternalLogging.throwInternalNonUserActionable(t.LoggingSeverity.WARNING,new t._InternalLogMessage(t._InternalMessageId.NONUSRACT_FailedMonitorAjaxDur,"Failed to calculate the duration of the ajax call, monitoring data for this ajax call won't be sent.",{ajaxDiagnosticsMessage:n.getFailedAjaxDiagnosticsMessage(e),requestSentTime:e.ajaxData.requestSentTime,responseFinishedTime:e.ajaxData.responseFinishedTime})):(this.appInsights.trackAjax(e.ajaxData.id,e.ajaxData.getAbsoluteUrl(),e.ajaxData.getPathName(),e.ajaxData.ajaxTotalDuration,+e.ajaxData.status>=200&&+e.ajaxData.status<400,+e.ajaxData.status),e.ajaxData=null)},n.instrumentedByAppInsightsName="InstrumentedByAppInsights",n.DisabledPropertyName="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",n}();t.AjaxMonitor=n}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){var t=function(){function e(){}return e.prototype.getHashCodeScore=function(t){var n=this.getHashCode(t)/e.INT_MAX_VALUE;return 100*n},e.prototype.getHashCode=function(t){if(""==t)return 0;for(;t.length<e.MIN_INPUT_LENGTH;)t=t.concat(t);for(var n=5381,i=0;i<t.length;++i)n=(n<<5)+n+t.charCodeAt(i),n&=n;return Math.abs(n)},e.INT_MAX_VALUE=2147483647,e.MIN_INPUT_LENGTH=8,e}();e.HashCodeScoreGenerator=t}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){"use strict";!function(e){e[e.Default=0]="Default",e[e.Required=1]="Required",e[e.Array=2]="Array",e[e.Hidden=4]="Hidden"}(e.FieldType||(e.FieldType={}));var t=e.FieldType,n=function(){function n(){}return n.serialize=function(e){var t=n._serializeObject(e,"root");return JSON.stringify(t)},n._serializeObject=function(i,a){var o="__aiCircularRefCheck",r={};if(!i)return e._InternalLogging.throwInternalUserActionable(e.LoggingSeverity.CRITICAL,new e._InternalLogMessage(e._InternalMessageId.USRACT_CannotSerializeObject,"cannot serialize object because it is null or undefined",{name:a})),r;if(i[o])return e._InternalLogging.throwInternalUserActionable(e.LoggingSeverity.WARNING,new e._InternalLogMessage(e._InternalMessageId.USRACT_CircularReferenceDetected,"Circular reference detected while serializing object",{name:a})),r;if(!i.aiDataContract){if("measurements"===a)r=n._serializeStringMap(i,"number",a);else if("properties"===a)r=n._serializeStringMap(i,"string",a);else if("tags"===a)r=n._serializeStringMap(i,"string",a);else if(e.Util.isArray(i))r=n._serializeArray(i,a);else{e._InternalLogging.throwInternalUserActionable(e.LoggingSeverity.WARNING,new e._InternalLogMessage(e._InternalMessageId.USRACT_CannotSerializeObjectNonSerializable,"Attempting to serialize an object which does not implement ISerializable",{name:a}));try{JSON.stringify(i),r=i}catch(t){e._InternalLogging.throwInternalUserActionable(e.LoggingSeverity.CRITICAL,t&&"function"==typeof t.toString?t.toString():"Error serializing object")}}return r}i[o]=!0;for(var s in i.aiDataContract){var l=i.aiDataContract[s],c="function"==typeof l?l()&t.Required:l&t.Required,g="function"==typeof l?l()&t.Hidden:l&t.Hidden,u=l&t.Array,p=void 0!==i[s],d="object"==typeof i[s]&&null!==i[s];if(!c||p||u){if(!g){var f;f=d?u?n._serializeArray(i[s],s):n._serializeObject(i[s],s):i[s],void 0!==f&&(r[s]=f)}}else e._InternalLogging.throwInternalNonUserActionable(e.LoggingSeverity.CRITICAL,new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_MissingRequiredFieldSpecification,"Missing required field specification. The field is required but not present on source",{field:s,name:a}))}return delete i[o],r},n._serializeArray=function(t,i){var a=void 0;if(t)if(e.Util.isArray(t)){a=[];for(var o=0;o<t.length;o++){var r=t[o],s=n._serializeObject(r,i+"["+o+"]");a.push(s)}}else e._InternalLogging.throwInternalUserActionable(e.LoggingSeverity.CRITICAL,new e._InternalLogMessage(e._InternalMessageId.USRACT_ItemNotInArray,"This field was specified as an array in the contract but the item is not an array.\r\n",{name:i}));return a},n._serializeStringMap=function(t,n,i){var a=void 0;if(t){a={};for(var o in t){var r=t[o];if("string"===n)void 0===r?a[o]="undefined":null===r?a[o]="null":r.toString?a[o]=r.toString():a[o]="invalid field: toString() is not defined.";else if("number"===n)if(void 0===r)a[o]="undefined";else if(null===r)a[o]="null";else{var s=parseFloat(r);isNaN(s)?a[o]="NaN":a[o]=s}else a[o]="invalid field: "+i+" is of unknown type.",e._InternalLogging.throwInternalUserActionable(e.LoggingSeverity.CRITICAL,a[o])}}return a},n}();e.Serializer=n}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){"use strict";var t=function(){function e(){}return e}();e.Base=t}(t=e.Telemetry||(e.Telemetry={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){"use strict";var t=function(){function e(){this.ver=1,this.sampleRate=100,this.tags={}}return e}();e.Envelope=t}(t=e.Telemetry||(e.Telemetry={}))}(Microsoft||(Microsoft={}));var __extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n},Microsoft;!function(e){var t;!function(t){var n;!function(n){var i;!function(n){"use strict";var i=function(e){function n(n,i){var a=this;e.call(this),this.name=i,this.data=n,this.time=t.Util.toISOStringForIE8(new Date),this.aiDataContract={time:t.FieldType.Required,iKey:t.FieldType.Required,name:t.FieldType.Required,sampleRate:function(){return 100==a.sampleRate?t.FieldType.Hidden:t.FieldType.Required},tags:t.FieldType.Required,data:t.FieldType.Required}}return __extends(n,e),n}(e.Telemetry.Envelope);n.Envelope=i}(i=n.Common||(n.Common={}))}(n=t.Telemetry||(t.Telemetry={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(t){var n;!function(t){var n;!function(t){"use strict";var n=function(e){function t(){e.apply(this,arguments),this.aiDataContract={}}return __extends(t,e),t}(e.Telemetry.Base);t.Base=n}(n=t.Common||(t.Common={}))}(n=t.Telemetry||(t.Telemetry={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var AI;!function(e){"use strict";var t=function(){function e(){this.applicationVersion="ai.application.ver",this.applicationBuild="ai.application.build",this.applicationTypeId="ai.application.typeId",this.applicationId="ai.application.applicationId",this.deviceId="ai.device.id",this.deviceIp="ai.device.ip",this.deviceLanguage="ai.device.language",this.deviceLocale="ai.device.locale",this.deviceModel="ai.device.model",this.deviceNetwork="ai.device.network",this.deviceNetworkName="ai.device.networkName",this.deviceOEMName="ai.device.oemName",this.deviceOS="ai.device.os",this.deviceOSVersion="ai.device.osVersion",this.deviceRoleInstance="ai.device.roleInstance",this.deviceRoleName="ai.device.roleName",this.deviceScreenResolution="ai.device.screenResolution",this.deviceType="ai.device.type",this.deviceMachineName="ai.device.machineName",this.deviceVMName="ai.device.vmName",this.locationIp="ai.location.ip",this.operationId="ai.operation.id",this.operationName="ai.operation.name",this.operationParentId="ai.operation.parentId",this.operationRootId="ai.operation.rootId",this.operationSyntheticSource="ai.operation.syntheticSource",this.operationIsSynthetic="ai.operation.isSynthetic",this.operationCorrelationVector="ai.operation.correlationVector",this.sessionId="ai.session.id",this.sessionIsFirst="ai.session.isFirst",this.sessionIsNew="ai.session.isNew",this.userAccountAcquisitionDate="ai.user.accountAcquisitionDate",this.userAccountId="ai.user.accountId",this.userAgent="ai.user.userAgent",this.userId="ai.user.id",this.userStoreRegion="ai.user.storeRegion",this.userAuthUserId="ai.user.authUserId",this.userAnonymousUserAcquisitionDate="ai.user.anonUserAcquisitionDate",this.userAuthenticatedUserAcquisitionDate="ai.user.authUserAcquisitionDate",this.sampleRate="ai.sample.sampleRate",this.cloudName="ai.cloud.name",this.cloudRoleVer="ai.cloud.roleVer",this.cloudEnvironment="ai.cloud.environment",this.cloudLocation="ai.cloud.location",this.cloudDeploymentUnit="ai.cloud.deploymentUnit",this.serverDeviceOS="ai.serverDevice.os",this.serverDeviceOSVer="ai.serverDevice.osVer",this.internalSdkVersion="ai.internal.sdkVersion",this.internalAgentVersion="ai.internal.agentVersion",this.internalDataCollectorReceivedTime="ai.internal.dataCollectorReceivedTime",this.internalProfileId="ai.internal.profileId",this.internalProfileClassId="ai.internal.profileClassId",this.internalAccountId="ai.internal.accountId",this.internalApplicationName="ai.internal.applicationName",this.internalInstrumentationKey="ai.internal.instrumentationKey",this.internalTelemetryItemId="ai.internal.telemetryItemId",this.internalApplicationType="ai.internal.applicationType",this.internalRequestSource="ai.internal.requestSource",this.internalFlowType="ai.internal.flowType",this.internalIsAudit="ai.internal.isAudit",this.internalTrackingSourceId="ai.internal.trackingSourceId",this.internalTrackingType="ai.internal.trackingType",this.internalIsDiagnosticExample="ai.internal.isDiagnosticExample"}return e}();e.ContextTagKeys=t}(AI||(AI={}));var Microsoft;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(){}return e}();e.Application=t}(t=e.Context||(e.Context={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(){this.id="browser",this.type="Browser"}return e}();e.Device=t}(t=e.Context||(e.Context={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){var t;!function(t){"use strict";var n=function(){function t(){this.sdkVersion="JavaScript:"+e.Version}return t}();t.Internal=n}(t=e.Context||(e.Context={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){var t;!function(e){"use strict";var t=function(){function e(){}return e}();e.Location=t}(t=e.Context||(e.Context={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){var t;!function(t){"use strict";var n=function(){function t(){this.id=e.Util.newId(),window&&window.location&&window.location.pathname&&(this.name=window.location.pathname)}return t}();t.Operation=n}(t=e.Context||(e.Context={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){var t=function(){function t(){this.hashCodeGeneragor=new e.HashCodeScoreGenerator}return t.prototype.getSamplingScore=function(e){var t=new AI.ContextTagKeys,n=0;return n=e.tags[t.userId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[t.userId]):e.tags[t.operationId]?this.hashCodeGeneragor.getHashCodeScore(e.tags[t.operationId]):Math.random()},t}();e.SamplingScoreGenerator=t}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){var t;!function(t){"use strict";var n=function(){function t(t){this.INT_MAX_VALUE=2147483647,(t>100||t<0)&&(e._InternalLogging.throwInternalUserActionable(e.LoggingSeverity.WARNING,new e._InternalLogMessage(e._InternalMessageId.USRACT_SampleRateOutOfRange,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:t})),this.sampleRate=100),this.sampleRate=t,this.samplingScoreGenerator=new e.SamplingScoreGenerator}return t.prototype.isSampledIn=function(e){if(100==this.sampleRate)return!0;var t=this.samplingScoreGenerator.getSamplingScore(e);return t<this.sampleRate},t}();t.Sample=n}(t=e.Context||(e.Context={}));
}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var AI;!function(e){"use strict";!function(e){e[e.Start=0]="Start",e[e.End=1]="End"}(e.SessionState||(e.SessionState={}));e.SessionState}(AI||(AI={}));var Microsoft;!function(e){var t;!function(e){var t;!function(t){"use strict";var n=function(){function e(){}return e}();t.Session=n;var i=function(){function t(e){e||(e={}),"function"!=typeof e.sessionExpirationMs&&(e.sessionExpirationMs=function(){return t.acquisitionSpan}),"function"!=typeof e.sessionRenewalMs&&(e.sessionRenewalMs=function(){return t.renewalSpan}),this.config=e,this.automaticSession=new n}return t.prototype.update=function(){this.automaticSession.id||this.initializeAutomaticSession();var e=+new Date,t=e-this.automaticSession.acquisitionDate>this.config.sessionExpirationMs(),n=e-this.automaticSession.renewalDate>this.config.sessionRenewalMs();t||n?(this.automaticSession.isFirst=void 0,this.renew()):(this.automaticSession.renewalDate=+new Date,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate))},t.prototype.backup=function(){this.setStorage(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate)},t.prototype.initializeAutomaticSession=function(){var t=e.Util.getCookie("ai_session");if(t&&"function"==typeof t.split)this.initializeAutomaticSessionWithData(t);else{var n=e.Util.getStorage("ai_session");n&&this.initializeAutomaticSessionWithData(n)}this.automaticSession.id||(this.automaticSession.isFirst=!0,this.renew())},t.prototype.initializeAutomaticSessionWithData=function(t){var n=t.split("|");n.length>0&&(this.automaticSession.id=n[0]);try{if(n.length>1){var i=+n[1];this.automaticSession.acquisitionDate=+new Date(i),this.automaticSession.acquisitionDate=this.automaticSession.acquisitionDate>0?this.automaticSession.acquisitionDate:0}if(n.length>2){var a=+n[2];this.automaticSession.renewalDate=+new Date(a),this.automaticSession.renewalDate=this.automaticSession.renewalDate>0?this.automaticSession.renewalDate:0}}catch(t){e._InternalLogging.throwInternalNonUserActionable(e.LoggingSeverity.CRITICAL,new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_ErrorParsingAISessionCookie,"Error parsing ai_session cookie, session will be reset: "+e.Util.getExceptionName(t),{exception:e.Util.dump(t)}))}0==this.automaticSession.renewalDate&&e._InternalLogging.throwInternalNonUserActionable(e.LoggingSeverity.WARNING,new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_SessionRenewalDateIsZero,"AI session renewal date is 0, session will be reset."))},t.prototype.renew=function(){var t=+new Date;this.automaticSession.id=e.Util.newId(),this.automaticSession.acquisitionDate=t,this.automaticSession.renewalDate=t,this.setCookie(this.automaticSession.id,this.automaticSession.acquisitionDate,this.automaticSession.renewalDate),e.Util.canUseLocalStorage()||e._InternalLogging.throwInternalNonUserActionable(e.LoggingSeverity.WARNING,new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_BrowserDoesNotSupportLocalStorage,"Browser does not support local storage. Session durations will be inaccurate."))},t.prototype.setCookie=function(t,n,i){var a=n+this.config.sessionExpirationMs(),o=i+this.config.sessionRenewalMs(),r=new Date,s=[t,n,i];a<o?r.setTime(a):r.setTime(o);var l=this.config.cookieDomain?this.config.cookieDomain():null;e.Util.setCookie("ai_session",s.join("|")+";expires="+r.toUTCString(),l)},t.prototype.setStorage=function(t,n,i){e.Util.setStorage("ai_session",[t,n,i].join("|"))},t.acquisitionSpan=864e5,t.renewalSpan=18e5,t}();t._SessionManager=i}(t=e.Context||(e.Context={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){var t;!function(t){"use strict";var n=function(){function t(n){var i=e.Util.getCookie(t.userCookieName);if(i){var a=i.split(t.cookieSeparator);a.length>0&&(this.id=a[0])}if(this.config=n,!this.id){this.id=e.Util.newId();var o=new Date,r=e.Util.toISOStringForIE8(o);this.accountAcquisitionDate=r,o.setTime(o.getTime()+31536e6);var s=[this.id,r],l=this.config.cookieDomain?this.config.cookieDomain():void 0;e.Util.setCookie(t.userCookieName,s.join(t.cookieSeparator)+";expires="+o.toUTCString(),l),e.Util.removeStorage("ai_session")}this.accountId=n.accountId?n.accountId():void 0;var c=e.Util.getCookie(t.authUserCookieName);if(c){c=decodeURI(c);var g=c.split(t.cookieSeparator);g[0]&&(this.authenticatedId=g[0]),g.length>1&&g[1]&&(this.accountId=g[1])}}return t.prototype.setAuthenticatedUserContext=function(n,i){var a=!this.validateUserInput(n)||i&&!this.validateUserInput(i);if(a)return void e._InternalLogging.throwInternalUserActionable(e.LoggingSeverity.WARNING,new e._InternalLogMessage(e._InternalMessageId.USRACT_SetAuthContextFailedAccountName,"Setting auth user context failed. User auth/account id should be of type string, and not contain commas, semi-colons, equal signs, spaces, or vertical-bars."));this.authenticatedId=n;var o=this.authenticatedId;i&&(this.accountId=i,o=[this.authenticatedId,this.accountId].join(t.cookieSeparator)),e.Util.setCookie(t.authUserCookieName,encodeURI(o),this.config.cookieDomain())},t.prototype.clearAuthenticatedUserContext=function(){this.authenticatedId=null,this.accountId=null,e.Util.deleteCookie(t.authUserCookieName)},t.prototype.validateUserInput=function(e){return!("string"!=typeof e||!e||e.match(/,|;|=| |\|/))},t.cookieSeparator="|",t.userCookieName="ai_user",t.authUserCookieName="ai_authUser",t}();t.User=n}(t=e.Context||(e.Context={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){"use strict";var t=function(){function t(){}return t.reset=function(){t.isEnabled()&&e.Util.setSessionStorage(t.ITEMS_QUEUED_KEY,"0")},t.isEnabled=function(){return t.enabled&&null!=t.appInsights&&e.Util.canUseSessionStorage()},t.getIssuesReported=function(){var n=!t.isEnabled()||isNaN(+e.Util.getSessionStorage(t.ISSUES_REPORTED_KEY))?0:+e.Util.getSessionStorage(t.ISSUES_REPORTED_KEY);return n},t.incrementItemsQueued=function(){try{if(t.isEnabled()){var n=t.getNumberOfLostItems();++n,e.Util.setSessionStorage(t.ITEMS_QUEUED_KEY,n.toString())}}catch(e){}},t.decrementItemsQueued=function(n){try{if(t.isEnabled()){var i=t.getNumberOfLostItems();i-=n,i<0&&(i=0),e.Util.setSessionStorage(t.ITEMS_QUEUED_KEY,i.toString())}}catch(e){}},t.getNumberOfLostItems=function(){var n=0;try{t.isEnabled()&&(n=isNaN(+e.Util.getSessionStorage(t.ITEMS_QUEUED_KEY))?0:+e.Util.getSessionStorage(t.ITEMS_QUEUED_KEY))}catch(e){n=0}return n},t.reportLostItems=function(){try{if(t.isEnabled()&&t.getIssuesReported()<t.LIMIT_PER_SESSION&&t.getNumberOfLostItems()>0){t.appInsights.trackTrace("AI (Internal): Internal report DATALOSS: "+t.getNumberOfLostItems(),null),t.appInsights.flush();var n=t.getIssuesReported();++n,e.Util.setSessionStorage(t.ISSUES_REPORTED_KEY,n.toString())}}catch(t){e._InternalLogging.throwInternalNonUserActionable(e.LoggingSeverity.CRITICAL,new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_FailedToReportDataLoss,"Failed to report data loss: "+e.Util.getExceptionName(t),{exception:e.Util.dump(t)}))}finally{try{t.reset()}catch(e){}}},t.enabled=!1,t.LIMIT_PER_SESSION=10,t.ITEMS_QUEUED_KEY="AI_itemsQueued",t.ISSUES_REPORTED_KEY="AI_lossIssuesReported",t}();e.DataLossAnalyzer=t}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){"use strict";var t=function(){function t(e){if(this._buffer=[],this._lastSend=0,this._config=e,this._sender=null,"undefined"!=typeof XMLHttpRequest){var t=new XMLHttpRequest;"withCredentials"in t?this._sender=this._xhrSender:"undefined"!=typeof XDomainRequest&&(this._sender=this._xdrSender)}}return t.prototype.send=function(t){var n=this;try{if(this._config.disableTelemetry())return;if(!t)return void e._InternalLogging.throwInternalNonUserActionable(e.LoggingSeverity.CRITICAL,new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_CannotSendEmptyTelemetry,"Cannot send empty telemetry"));if(!this._sender)return void e._InternalLogging.throwInternalNonUserActionable(e.LoggingSeverity.CRITICAL,new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_SenderNotInitialized,"Sender was not initialized"));var i=e.Serializer.serialize(t);this._getSizeInBytes(this._buffer)+i.length>this._config.maxBatchSizeInBytes()&&this.triggerSend(),this._buffer.push(i),this._timeoutHandle||(this._timeoutHandle=setTimeout(function(){n._timeoutHandle=null,n.triggerSend()},this._config.maxBatchInterval())),e.DataLossAnalyzer.incrementItemsQueued()}catch(t){e._InternalLogging.throwInternalNonUserActionable(e.LoggingSeverity.CRITICAL,new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_FailedAddingTelemetryToBuffer,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+e.Util.getExceptionName(t),{exception:e.Util.dump(t)}))}},t.prototype._getSizeInBytes=function(e){var t=0;if(e&&e.length)for(var n=0;n<e.length;n++){var i=e[n];i&&i.length&&(t+=i.length)}return t},t.prototype.triggerSend=function(t){var n=!0;"boolean"==typeof t&&(n=t);try{if(!this._config.disableTelemetry()){if(this._buffer.length){var i=this._config.emitLineDelimitedJson()?this._buffer.join("\n"):"["+this._buffer.join(",")+"]";this._sender(i,n,this._buffer.length)}this._lastSend=+new Date}this._buffer.length=0,clearTimeout(this._timeoutHandle),this._timeoutHandle=null}catch(t){(!e.Util.getIEVersion()||e.Util.getIEVersion()>9)&&e._InternalLogging.throwInternalNonUserActionable(e.LoggingSeverity.CRITICAL,new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_TransmissionFailed,"Telemetry transmission failed, some telemetry will be lost: "+e.Util.getExceptionName(t),{exception:e.Util.dump(t)}))}},t.prototype._xhrSender=function(n,i,a){var o=new XMLHttpRequest;o[e.AjaxMonitor.DisabledPropertyName]=!0,o.open("POST",this._config.endpointUrl(),i),o.setRequestHeader("Content-type","application/json"),o.onreadystatechange=function(){return t._xhrReadyStateChange(o,n,a)},o.onerror=function(e){return t._onError(n,o.responseText||o.response||"",e)},o.send(n)},t.prototype._xdrSender=function(e,n){var i=new XDomainRequest;i.onload=function(){return t._xdrOnLoad(i,e)},i.onerror=function(n){return t._onError(e,i.responseText||"",n)},i.open("POST",this._config.endpointUrl()),i.send(e)},t._xhrReadyStateChange=function(e,n,i){4===e.readyState&&((e.status<200||e.status>=300)&&0!==e.status?t._onError(n,e.responseText||e.response||""):t._onSuccess(n,i))},t._xdrOnLoad=function(e,n){!e||e.responseText+""!="200"&&""!==e.responseText?t._onError(n,e&&e.responseText||""):t._onSuccess(n,0)},t._onError=function(t,n,i){e._InternalLogging.throwInternalNonUserActionable(e.LoggingSeverity.WARNING,new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_OnError,"Failed to send telemetry.",{message:n}))},t._onSuccess=function(t,n){e.DataLossAnalyzer.decrementItemsQueued(n)},t}();e.Sender=t}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){"use strict";var t=function(){function t(){this.hashCodeGeneragor=new e.HashCodeScoreGenerator}return t.prototype.isEnabled=function(e,t){return this.hashCodeGeneragor.getHashCodeScore(e)<t},t}();e.SplitTest=t}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){"use strict";var t=function(){function e(){}return e}();e.Domain=t}(t=e.Telemetry||(e.Telemetry={}))}(Microsoft||(Microsoft={}));var AI;!function(e){"use strict";!function(e){e[e.Verbose=0]="Verbose",e[e.Information=1]="Information",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Critical=4]="Critical"}(e.SeverityLevel||(e.SeverityLevel={}));e.SeverityLevel}(AI||(AI={}));var AI;!function(e){"use strict";var t=function(e){function t(){this.ver=2,this.properties={},e.call(this)}return __extends(t,e),t}(Microsoft.Telemetry.Domain);e.MessageData=t}(AI||(AI={}));var Microsoft;!function(e){var t;!function(e){var t;!function(t){var n;!function(t){"use strict";var n=function(){function t(){}return t.sanitizeKeyAndAddUniqueness=function(e,n){var i=e.length,a=t.sanitizeKey(e);if(a.length!==i){for(var o=0,r=a;void 0!==n[r];)o++,r=a.substring(0,t.MAX_NAME_LENGTH-3)+t.padNumber(o);a=r}return a},t.sanitizeKey=function(n){return n&&(n=e.Util.trim(n.toString()),n.search(/[^0-9a-zA-Z-._()\/ ]/g)>=0&&(n=n.replace(/[^0-9a-zA-Z-._()\/ ]/g,"_"),e._InternalLogging.throwInternalUserActionable(e.LoggingSeverity.WARNING,new e._InternalLogMessage(e._InternalMessageId.USRACT_IllegalCharsInName,"name contains illegal characters. Illegal characters have been replaced with '_'.",{newName:n}))),n.length>t.MAX_NAME_LENGTH&&(n=n.substring(0,t.MAX_NAME_LENGTH),e._InternalLogging.throwInternalUserActionable(e.LoggingSeverity.WARNING,new e._InternalLogMessage(e._InternalMessageId.USRACT_NameTooLong,"name is too long.  It has been truncated to "+t.MAX_NAME_LENGTH+" characters.",{name:n})))),n},t.sanitizeString=function(n){return n&&(n=e.Util.trim(n),n.toString().length>t.MAX_STRING_LENGTH&&(n=n.toString().substring(0,t.MAX_STRING_LENGTH),e._InternalLogging.throwInternalUserActionable(e.LoggingSeverity.WARNING,new e._InternalLogMessage(e._InternalMessageId.USRACT_StringValueTooLong,"string value is too long. It has been truncated to "+t.MAX_STRING_LENGTH+" characters.",{value:n})))),n},t.sanitizeUrl=function(n){return n&&n.length>t.MAX_URL_LENGTH&&(n=n.substring(0,t.MAX_URL_LENGTH),e._InternalLogging.throwInternalUserActionable(e.LoggingSeverity.WARNING,new e._InternalLogMessage(e._InternalMessageId.USRACT_UrlTooLong,"url is too long, it has been trucated to "+t.MAX_URL_LENGTH+" characters.",{url:n}))),n},t.sanitizeMessage=function(n){return n&&n.length>t.MAX_MESSAGE_LENGTH&&(n=n.substring(0,t.MAX_MESSAGE_LENGTH),e._InternalLogging.throwInternalUserActionable(e.LoggingSeverity.WARNING,new e._InternalLogMessage(e._InternalMessageId.USRACT_MessageTruncated,"message is too long, it has been trucated to "+t.MAX_MESSAGE_LENGTH+" characters.",{message:n}))),n},t.sanitizeException=function(n){return n&&n.length>t.MAX_EXCEPTION_LENGTH&&(n=n.substring(0,t.MAX_EXCEPTION_LENGTH),e._InternalLogging.throwInternalUserActionable(e.LoggingSeverity.WARNING,new e._InternalLogMessage(e._InternalMessageId.USRACT_ExceptionTruncated,"exception is too long, it has been trucated to "+t.MAX_EXCEPTION_LENGTH+" characters.",{exception:n}))),n},t.sanitizeProperties=function(e){if(e){var n={};for(var i in e){var a=t.sanitizeString(e[i]);i=t.sanitizeKeyAndAddUniqueness(i,n),n[i]=a}e=n}return e},t.sanitizeMeasurements=function(e){if(e){var n={};for(var i in e){var a=e[i];i=t.sanitizeKeyAndAddUniqueness(i,n),n[i]=a}e=n}return e},t.padNumber=function(e){var t="00"+e;return t.substr(t.length-3)},t.MAX_NAME_LENGTH=150,t.MAX_STRING_LENGTH=1024,t.MAX_URL_LENGTH=2048,t.MAX_MESSAGE_LENGTH=32768,t.MAX_EXCEPTION_LENGTH=32768,t}();t.DataSanitizer=n}(n=t.Common||(t.Common={}))}(t=e.Telemetry||(e.Telemetry={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){var t;!function(t){"use strict";var n=function(n){function i(i,a){n.call(this),this.aiDataContract={ver:e.FieldType.Required,message:e.FieldType.Required,severityLevel:e.FieldType.Default,measurements:e.FieldType.Default,properties:e.FieldType.Default},i=i||e.Util.NotSpecified,this.message=t.Common.DataSanitizer.sanitizeMessage(i),this.properties=t.Common.DataSanitizer.sanitizeProperties(a)}return __extends(i,n),i.envelopeType="Microsoft.ApplicationInsights.{0}.Message",i.dataType="MessageData",i}(AI.MessageData);t.Trace=n}(t=e.Telemetry||(e.Telemetry={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var AI;!function(e){"use strict";var t=function(e){function t(){this.ver=2,this.properties={},this.measurements={},e.call(this)}return __extends(t,e),t}(Microsoft.Telemetry.Domain);e.EventData=t}(AI||(AI={}));var Microsoft;!function(e){var t;!function(e){var t;!function(t){"use strict";var n=function(t){function n(n,i,a){t.call(this),this.aiDataContract={ver:e.FieldType.Required,name:e.FieldType.Required,properties:e.FieldType.Default,measurements:e.FieldType.Default},this.name=e.Telemetry.Common.DataSanitizer.sanitizeString(n),this.properties=e.Telemetry.Common.DataSanitizer.sanitizeProperties(i),this.measurements=e.Telemetry.Common.DataSanitizer.sanitizeMeasurements(a)}return __extends(n,t),n.envelopeType="Microsoft.ApplicationInsights.{0}.Event",n.dataType="EventData",n}(AI.EventData);t.Event=n}(t=e.Telemetry||(e.Telemetry={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var AI;!function(e){"use strict";var t=function(){function e(){this.hasFullStack=!0,this.parsedStack=[]}return e}();e.ExceptionDetails=t}(AI||(AI={}));var AI;!function(e){"use strict";var t=function(e){function t(){this.ver=2,this.exceptions=[],this.properties={},this.measurements={},e.call(this)}return __extends(t,e),t}(Microsoft.Telemetry.Domain);e.ExceptionData=t}(AI||(AI={}));var AI;!function(e){"use strict";var t=function(){function e(){}return e}();e.StackFrame=t}(AI||(AI={}));var Microsoft;!function(e){var t;!function(e){var t;!function(t){"use strict";var n=function(t){function n(n,a,o,r){t.call(this),this.aiDataContract={ver:e.FieldType.Required,handledAt:e.FieldType.Required,exceptions:e.FieldType.Required,severityLevel:e.FieldType.Default,properties:e.FieldType.Default,measurements:e.FieldType.Default},this.properties=e.Telemetry.Common.DataSanitizer.sanitizeProperties(o),this.measurements=e.Telemetry.Common.DataSanitizer.sanitizeMeasurements(r),this.handledAt=a||"unhandled",this.exceptions=[new i(n)]}return __extends(n,t),n.CreateSimpleException=function(e,t,n,i,a,o,r){return{handledAt:r||"unhandled",exceptions:[{hasFullStack:!0,message:e,stack:a,typeName:t,parsedStack:[{level:0,assembly:n,fileName:i,line:o,method:"unknown"}]}]}},n.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",n.dataType="ExceptionData",n}(AI.ExceptionData);t.Exception=n;var i=function(n){function i(i){n.call(this),this.aiDataContract={id:e.FieldType.Default,outerId:e.FieldType.Default,typeName:e.FieldType.Required,message:e.FieldType.Required,hasFullStack:e.FieldType.Default,stack:e.FieldType.Default,parsedStack:e.FieldType.Array},this.typeName=t.Common.DataSanitizer.sanitizeString(i.name||e.Util.NotSpecified),this.message=t.Common.DataSanitizer.sanitizeMessage(i.message||e.Util.NotSpecified);var a=i.stack;this.parsedStack=this.parseStack(a),this.stack=t.Common.DataSanitizer.sanitizeException(a),this.hasFullStack=e.Util.isArray(this.parsedStack)&&this.parsedStack.length>0}return __extends(i,n),i.prototype.parseStack=function(e){var t=void 0;if("string"==typeof e){var n=e.split("\n");t=[];for(var i=0,o=0,r=0;r<=n.length;r++){var s=n[r];if(a.regex.test(s)){var l=new a(n[r],i++);o+=l.sizeInBytes,t.push(l)}}var c=32768;if(o>c)for(var g=0,u=t.length-1,p=0,d=g,f=u;g<u;){var h=t[g].sizeInBytes,m=t[u].sizeInBytes;if(p+=h+m,p>c){var I=f-d+1;t.splice(d,I);break}d=g,f=u,g++,u--}}return t},i}(AI.ExceptionDetails),a=function(t){function n(i,a){t.call(this),this.sizeInBytes=0,this.aiDataContract={level:e.FieldType.Required,method:e.FieldType.Required,assembly:e.FieldType.Default,fileName:e.FieldType.Default,line:e.FieldType.Default},this.level=a,this.method="<no_method>",this.assembly=e.Util.trim(i);var o=i.match(n.regex);o&&o.length>=5&&(this.method=e.Util.trim(o[2])||this.method,this.fileName=e.Util.trim(o[4]),this.line=parseInt(o[5])||0),this.sizeInBytes+=this.method.length,this.sizeInBytes+=this.fileName.length,this.sizeInBytes+=this.assembly.length,this.sizeInBytes+=n.baseSize,this.sizeInBytes+=this.level.toString().length,this.sizeInBytes+=this.line.toString().length}return __extends(n,t),n.regex=/^([\s]+at)?(.*?)(\@|\s\(|\s)([^\(\@\n]+):([0-9]+):([0-9]+)(\)?)$/,n.baseSize=58,n}(AI.StackFrame);t._StackFrame=a}(t=e.Telemetry||(e.Telemetry={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var AI;!function(e){"use strict";var t=function(e){function t(){this.ver=2,this.metrics=[],this.properties={},e.call(this)}return __extends(t,e),t}(Microsoft.Telemetry.Domain);e.MetricData=t}(AI||(AI={}));var AI;!function(e){"use strict";!function(e){e[e.Measurement=0]="Measurement",e[e.Aggregation=1]="Aggregation"}(e.DataPointType||(e.DataPointType={}));e.DataPointType}(AI||(AI={}));var AI;!function(e){"use strict";var t=function(){function t(){this.kind=e.DataPointType.Measurement}return t}();e.DataPoint=t}(AI||(AI={}));var Microsoft;!function(e){var t;!function(e){var t;!function(t){var n;!function(t){"use strict";var n=function(t){function n(){t.apply(this,arguments),this.aiDataContract={name:e.FieldType.Required,kind:e.FieldType.Default,value:e.FieldType.Required,count:e.FieldType.Default,min:e.FieldType.Default,max:e.FieldType.Default,stdDev:e.FieldType.Default}}return __extends(n,t),n}(AI.DataPoint);t.DataPoint=n}(n=t.Common||(t.Common={}))}(t=e.Telemetry||(e.Telemetry={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(t){var n;!function(n){"use strict";var i=function(i){function a(a,o,r,s,l,c){i.call(this),this.aiDataContract={ver:t.FieldType.Required,metrics:t.FieldType.Required,properties:t.FieldType.Default};var g=new e.ApplicationInsights.Telemetry.Common.DataPoint;g.count=r>0?r:void 0,g.max=isNaN(l)||null===l?void 0:l,g.min=isNaN(s)||null===s?void 0:s,g.name=n.Common.DataSanitizer.sanitizeString(a),g.value=o,this.metrics=[g],this.properties=t.Telemetry.Common.DataSanitizer.sanitizeProperties(c)}return __extends(a,i),a.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",a.dataType="MetricData",a}(AI.MetricData);n.Metric=i}(n=t.Telemetry||(t.Telemetry={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var AI;!function(e){"use strict";var t=function(e){function t(){this.ver=2,this.properties={},this.measurements={},e.call(this)}return __extends(t,e),t}(e.EventData);e.PageViewData=t}(AI||(AI={}));var Microsoft;!function(e){var t;!function(e){var t;!function(t){"use strict";var n=function(n){function i(i,a,o,r,s){n.call(this),this.aiDataContract={ver:e.FieldType.Required,name:e.FieldType.Default,url:e.FieldType.Default,duration:e.FieldType.Default,properties:e.FieldType.Default,measurements:e.FieldType.Default},this.url=t.Common.DataSanitizer.sanitizeUrl(a),this.name=t.Common.DataSanitizer.sanitizeString(i||e.Util.NotSpecified),isNaN(o)||(this.duration=e.Util.msToTimeSpan(o)),this.properties=e.Telemetry.Common.DataSanitizer.sanitizeProperties(r),this.measurements=e.Telemetry.Common.DataSanitizer.sanitizeMeasurements(s)}return __extends(i,n),i.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",i.dataType="PageviewData",i}(AI.PageViewData);t.PageView=n}(t=e.Telemetry||(e.Telemetry={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var AI;!function(e){"use strict";var t=function(e){function t(){this.ver=2,this.properties={},this.measurements={},e.call(this)}return __extends(t,e),t}(e.PageViewData);e.PageViewPerfData=t}(AI||(AI={}));var Microsoft;!function(e){var t;!function(e){var t;!function(t){"use strict";var n=function(n){function i(a,o,r,s,l){n.call(this),this.aiDataContract={ver:e.FieldType.Required,name:e.FieldType.Default,url:e.FieldType.Default,duration:e.FieldType.Default,perfTotal:e.FieldType.Default,networkConnect:e.FieldType.Default,sentRequest:e.FieldType.Default,receivedResponse:e.FieldType.Default,domProcessing:e.FieldType.Default,properties:e.FieldType.Default,measurements:e.FieldType.Default},this.isValid=!1;var c=i.getPerformanceTiming();if(c){var g=i.getDuration(c.navigationStart,c.loadEventEnd),u=i.getDuration(c.navigationStart,c.connectEnd),p=i.getDuration(c.requestStart,c.responseStart),d=i.getDuration(c.responseStart,c.responseEnd),f=i.getDuration(c.responseEnd,c.loadEventEnd);0==g?e._InternalLogging.throwInternalNonUserActionable(e.LoggingSeverity.WARNING,new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_ErrorPVCalc,"error calculating page view performance.",{total:g,network:u,request:p,response:d,dom:f})):g<Math.floor(u)+Math.floor(p)+Math.floor(d)+Math.floor(f)?e._InternalLogging.throwInternalNonUserActionable(e.LoggingSeverity.WARNING,new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_ClientPerformanceMathError,"client performance math error.",{total:g,network:u,request:p,response:d,dom:f})):(this.durationMs=g,this.perfTotal=this.duration=e.Util.msToTimeSpan(g),this.networkConnect=e.Util.msToTimeSpan(u),this.sentRequest=e.Util.msToTimeSpan(p),this.receivedResponse=e.Util.msToTimeSpan(d),this.domProcessing=e.Util.msToTimeSpan(f),this.isValid=!0)}this.url=t.Common.DataSanitizer.sanitizeUrl(o),this.name=t.Common.DataSanitizer.sanitizeString(a||e.Util.NotSpecified),this.properties=e.Telemetry.Common.DataSanitizer.sanitizeProperties(s),this.measurements=e.Telemetry.Common.DataSanitizer.sanitizeMeasurements(l)}return __extends(i,n),i.prototype.getIsValid=function(){return this.isValid},i.prototype.getDurationMs=function(){return this.durationMs},i.getPerformanceTiming=function(){return"undefined"!=typeof window&&window.performance&&window.performance.timing?window.performance.timing:null},i.isPerformanceTimingSupported=function(){return"undefined"!=typeof window&&window.performance&&window.performance.timing},i.isPerformanceTimingDataReady=function(){var e=window.performance.timing;return e.domainLookupStart>0&&e.navigationStart>0&&e.responseStart>0&&e.requestStart>0&&e.loadEventEnd>0&&e.responseEnd>0&&e.connectEnd>0&&e.domLoading>0},i.getDuration=function(e,t){var n=0;return isNaN(e)||isNaN(t)||(n=Math.max(t-e,0)),n},i.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",i.dataType="PageviewPerformanceData",i}(AI.PageViewPerfData);t.PageViewPerformance=n}(t=e.Telemetry||(e.Telemetry={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){"use strict";var t=function(){function t(t){this._config=t,this._sender=new e.Sender(t),"undefined"!=typeof window&&(this._sessionManager=new e.Context._SessionManager(t),this.application=new e.Context.Application,this.device=new e.Context.Device,this.internal=new e.Context.Internal,this.location=new e.Context.Location,this.user=new e.Context.User(t),this.operation=new e.Context.Operation,this.session=new e.Context.Session,this.sample=new e.Context.Sample(t.sampleRate()))}return t.prototype.addTelemetryInitializer=function(e){this.telemetryInitializers=this.telemetryInitializers||[],this.telemetryInitializers.push(e)},t.prototype.track=function(t){return t?(t.name===e.Telemetry.PageView.envelopeType&&e._InternalLogging.resetInternalMessageCount(),this.session&&"string"!=typeof this.session.id&&this._sessionManager.update(),this._track(t)):e._InternalLogging.throwInternalUserActionable(e.LoggingSeverity.CRITICAL,new e._InternalLogMessage(e._InternalMessageId.USRACT_TrackArgumentsNotSpecified,"cannot call .track() with a null or undefined argument")),t},t.prototype._track=function(t){this.session&&("string"==typeof this.session.id?this._applySessionContext(t,this.session):this._applySessionContext(t,this._sessionManager.automaticSession)),this._applyApplicationContext(t,this.application),this._applyDeviceContext(t,this.device),this._applyInternalContext(t,this.internal),this._applyLocationContext(t,this.location),this._applySampleContext(t,this.sample),this._applyUserContext(t,this.user),this._applyOperationContext(t,this.operation),t.iKey=this._config.instrumentationKey();var n=!1;try{this.telemetryInitializers=this.telemetryInitializers||[];for(var i=this.telemetryInitializers.length,a=0;a<i;++a){var o=this.telemetryInitializers[a];if(o&&o.apply(null,[t])===!1){n=!0;break}}}catch(t){n=!0,e._InternalLogging.throwInternalUserActionable(e.LoggingSeverity.CRITICAL,new e._InternalLogMessage(e._InternalMessageId.USRACT_TelemetryInitializerFailed,"One of telemetry initializers failed, telemetry item will not be sent: "+e.Util.getExceptionName(t),{exception:e.Util.dump(t)}))}if(!n)if(t.name===e.Telemetry.Metric.envelopeType||this.sample.isSampledIn(t)){var r=this._config.instrumentationKey().replace(/-/g,"");t.name=t.name.replace("{0}",r),this._sender.send(t)}else e._InternalLogging.throwInternalUserActionable(e.LoggingSeverity.WARNING,new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_TelemetrySampledAndNotSent,"Telemetry is sampled and not sent to the AI service.",{SampleRate:this.sample.sampleRate}));return t},t.prototype._applyApplicationContext=function(e,t){if(t){var n=new AI.ContextTagKeys;"string"==typeof t.ver&&(e.tags[n.applicationVersion]=t.ver),"string"==typeof t.build&&(e.tags[n.applicationBuild]=t.build)}},t.prototype._applyDeviceContext=function(e,t){var n=new AI.ContextTagKeys;t&&("string"==typeof t.id&&(e.tags[n.deviceId]=t.id),"string"==typeof t.ip&&(e.tags[n.deviceIp]=t.ip),"string"==typeof t.language&&(e.tags[n.deviceLanguage]=t.language),"string"==typeof t.locale&&(e.tags[n.deviceLocale]=t.locale),"string"==typeof t.model&&(e.tags[n.deviceModel]=t.model),"undefined"!=typeof t.network&&(e.tags[n.deviceNetwork]=t.network),"string"==typeof t.oemName&&(e.tags[n.deviceOEMName]=t.oemName),"string"==typeof t.os&&(e.tags[n.deviceOS]=t.os),"string"==typeof t.osversion&&(e.tags[n.deviceOSVersion]=t.osversion),"string"==typeof t.resolution&&(e.tags[n.deviceScreenResolution]=t.resolution),"string"==typeof t.type&&(e.tags[n.deviceType]=t.type))},t.prototype._applyInternalContext=function(e,t){if(t){var n=new AI.ContextTagKeys;"string"==typeof t.agentVersion&&(e.tags[n.internalAgentVersion]=t.agentVersion),"string"==typeof t.sdkVersion&&(e.tags[n.internalSdkVersion]=t.sdkVersion)}},t.prototype._applyLocationContext=function(e,t){if(t){var n=new AI.ContextTagKeys;"string"==typeof t.ip&&(e.tags[n.locationIp]=t.ip)}},t.prototype._applyOperationContext=function(e,t){if(t){var n=new AI.ContextTagKeys;"string"==typeof t.id&&(e.tags[n.operationId]=t.id),"string"==typeof t.name&&(e.tags[n.operationName]=t.name),"string"==typeof t.parentId&&(e.tags[n.operationParentId]=t.parentId),"string"==typeof t.rootId&&(e.tags[n.operationRootId]=t.rootId),"string"==typeof t.syntheticSource&&(e.tags[n.operationSyntheticSource]=t.syntheticSource)}},t.prototype._applySampleContext=function(e,t){t&&(e.sampleRate=t.sampleRate)},t.prototype._applySessionContext=function(e,t){if(t){var n=new AI.ContextTagKeys;"string"==typeof t.id&&(e.tags[n.sessionId]=t.id),"undefined"!=typeof t.isFirst&&(e.tags[n.sessionIsFirst]=t.isFirst)}},t.prototype._applyUserContext=function(e,t){if(t){var n=new AI.ContextTagKeys;"string"==typeof t.accountId&&(e.tags[n.userAccountId]=t.accountId),"string"==typeof t.agent&&(e.tags[n.userAgent]=t.agent),"string"==typeof t.id&&(e.tags[n.userId]=t.id),"string"==typeof t.authenticatedId&&(e.tags[n.userAuthUserId]=t.authenticatedId),"string"==typeof t.storeRegion&&(e.tags[n.userStoreRegion]=t.storeRegion)}},t}();e.TelemetryContext=t}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(t){"use strict";var n=function(e){function t(){e.call(this)}return __extends(t,e),t}(e.Telemetry.Base);t.Data=n}(t=e.Telemetry||(e.Telemetry={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(t){var n;!function(n){var i;!function(n){"use strict";var i=function(e){function n(n,i){e.call(this),this.aiDataContract={baseType:t.FieldType.Required,baseData:t.FieldType.Required},this.baseType=n,this.baseData=i}return __extends(n,e),n}(e.Telemetry.Data);n.Data=i}(i=n.Common||(n.Common={}))}(n=t.Telemetry||(t.Telemetry={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;
!function(e){var t;!function(e){var t;!function(t){"use strict";var n=function(){function n(e,t){this.pageViewPerformanceSent=!1,this.overridePageViewDuration=!1,this.overridePageViewDuration=t,this.appInsights=e}return n.prototype.trackPageView=function(n,i,a,o,r){var s=this;"string"!=typeof n&&(n=window.document&&window.document.title||""),"string"!=typeof i&&(i=window.location&&window.location.href||"");var l=!1,c=0;if(t.PageViewPerformance.isPerformanceTimingSupported()){var g=t.PageViewPerformance.getPerformanceTiming().navigationStart;c=t.PageViewPerformance.getDuration(g,+new Date)}else this.appInsights.sendPageViewInternal(n,i,isNaN(r)?0:r,a,o),this.appInsights.flush(),l=!0;!this.overridePageViewDuration&&isNaN(r)||(this.appInsights.sendPageViewInternal(n,i,isNaN(r)?c:r,a,o),this.appInsights.flush(),l=!0);var u=6e4;if(!t.PageViewPerformance.isPerformanceTimingSupported())return void e._InternalLogging.throwInternalNonUserActionable(e.LoggingSeverity.WARNING,new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_NavigationTimingNotSupported,"trackPageView: navigation timing API used for calculation of page duration is not supported in this browser. This page view will be collected without duration and timing info."));var p=setInterval(function(){try{if(t.PageViewPerformance.isPerformanceTimingDataReady()){clearInterval(p);var r=new t.PageViewPerformance(n,i,null,a,o);r.getIsValid()||l?(l||s.appInsights.sendPageViewInternal(n,i,r.getDurationMs(),a,o),s.pageViewPerformanceSent||(s.appInsights.sendPageViewPerformanceInternal(r),s.pageViewPerformanceSent=!0),s.appInsights.flush()):(s.appInsights.sendPageViewInternal(n,i,c,a,o),s.appInsights.flush())}else t.PageViewPerformance.getDuration(g,+new Date)>u&&(clearInterval(p),l||(s.appInsights.sendPageViewInternal(n,i,u,a,o),s.appInsights.flush()))}catch(t){e._InternalLogging.throwInternalNonUserActionable(e.LoggingSeverity.CRITICAL,new e._InternalLogMessage(e._InternalMessageId.NONUSRACT_TrackPVFailedCalc,"trackPageView failed on page load calculation: "+e.Util.getExceptionName(t),{exception:e.Util.dump(t)}))}},100)},n}();t.PageViewManager=n}(t=e.Telemetry||(e.Telemetry={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(e){var t;!function(t){"use strict";var n=function(){function t(e){this.prevPageVisitDataKeyName="prevPageVisitData",this.pageVisitTimeTrackingHandler=e}return t.prototype.trackPreviousPageVisit=function(t,n){try{var i=this.restartPageVisitTimer(t,n);i&&this.pageVisitTimeTrackingHandler(i.pageName,i.pageUrl,i.pageVisitTime)}catch(t){e._InternalLogging.warnToConsole("Auto track page visit time failed, metric will not be collected: "+e.Util.dump(t))}},t.prototype.restartPageVisitTimer=function(t,n){try{var i=this.stopPageVisitTimer();return this.startPageVisitTimer(t,n),i}catch(t){return e._InternalLogging.warnToConsole("Call to restart failed: "+e.Util.dump(t)),null}},t.prototype.startPageVisitTimer=function(t,n){try{if(e.Util.canUseSessionStorage()){if(null!=e.Util.getSessionStorage(this.prevPageVisitDataKeyName))throw new Error("Cannot call startPageVisit consecutively without first calling stopPageVisit");var a=new i(t,n),o=JSON.stringify(a);e.Util.setSessionStorage(this.prevPageVisitDataKeyName,o)}}catch(t){e._InternalLogging.warnToConsole("Call to start failed: "+e.Util.dump(t))}},t.prototype.stopPageVisitTimer=function(){try{if(e.Util.canUseSessionStorage()){var t=Date.now(),n=e.Util.getSessionStorage(this.prevPageVisitDataKeyName);if(n){var i=JSON.parse(n);return i.pageVisitTime=t-i.pageVisitStartTime,e.Util.removeSessionStorage(this.prevPageVisitDataKeyName),i}return null}return null}catch(t){return e._InternalLogging.warnToConsole("Stop page visit timer failed: "+e.Util.dump(t)),null}},t}();t.PageVisitTimeManager=n;var i=function(){function e(e,t){this.pageVisitStartTime=Date.now(),this.pageName=e,this.pageUrl=t}return e}();t.PageVisitData=i}(t=e.Telemetry||(e.Telemetry={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var AI;!function(e){"use strict";!function(e){e[e.SQL=0]="SQL",e[e.Http=1]="Http",e[e.Other=2]="Other"}(e.DependencyKind||(e.DependencyKind={}));e.DependencyKind}(AI||(AI={}));var AI;!function(e){"use strict";!function(e){e[e.Undefined=0]="Undefined",e[e.Aic=1]="Aic",e[e.Apmc=2]="Apmc"}(e.DependencySourceType||(e.DependencySourceType={}));e.DependencySourceType}(AI||(AI={}));var AI;!function(e){"use strict";var t=function(t){function n(){this.ver=2,this.kind=e.DataPointType.Aggregation,this.dependencyKind=e.DependencyKind.Other,this.success=!0,this.dependencySource=e.DependencySourceType.Apmc,this.properties={},t.call(this)}return __extends(n,t),n}(Microsoft.Telemetry.Domain);e.RemoteDependencyData=t}(AI||(AI={}));var Microsoft;!function(e){var t;!function(e){var t;!function(t){"use strict";var n=function(t){function n(n,i,a,o,r,s){t.call(this),this.aiDataContract={id:e.FieldType.Required,ver:e.FieldType.Required,name:e.FieldType.Default,kind:e.FieldType.Required,value:e.FieldType.Default,count:e.FieldType.Default,min:e.FieldType.Default,max:e.FieldType.Default,stdDev:e.FieldType.Default,dependencyKind:e.FieldType.Default,success:e.FieldType.Default,async:e.FieldType.Default,dependencySource:e.FieldType.Default,commandName:e.FieldType.Default,dependencyTypeName:e.FieldType.Default,properties:e.FieldType.Default,resultCode:e.FieldType.Default},this.id=n,this.name=i,this.commandName=a,this.value=o,this.success=r,this.resultCode=s+"",this.dependencyKind=AI.DependencyKind.Http,this.dependencyTypeName="Ajax"}return __extends(n,t),n.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",n.dataType="RemoteDependencyData",n}(AI.RemoteDependencyData);t.RemoteDependencyData=n}(t=e.Telemetry||(e.Telemetry={}))}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(t){"use strict";t.Version="0.22.9";var n=function(){function n(a){var o=this;this._trackAjaxAttempts=0,this.config=a||{};var r=n.defaultConfig;if(void 0!==r)for(var s in r)void 0===this.config[s]&&(this.config[s]=r[s]);t._InternalLogging.verboseLogging=function(){return o.config.verboseLogging},t._InternalLogging.enableDebugExceptions=function(){return o.config.enableDebug};var l={instrumentationKey:function(){return o.config.instrumentationKey},accountId:function(){return o.config.accountId},sessionRenewalMs:function(){return o.config.sessionRenewalMs},sessionExpirationMs:function(){return o.config.sessionExpirationMs},endpointUrl:function(){return o.config.endpointUrl},emitLineDelimitedJson:function(){return o.config.emitLineDelimitedJson},maxBatchSizeInBytes:function(){return o.config.maxBatchSizeInBytes},maxBatchInterval:function(){return o.config.maxBatchInterval},disableTelemetry:function(){return o.config.disableTelemetry},sampleRate:function(){return o.config.samplingPercentage},cookieDomain:function(){return o.config.cookieDomain}};this.context=new t.TelemetryContext(l),this._pageViewManager=new e.ApplicationInsights.Telemetry.PageViewManager(this,this.config.overridePageViewDuration),this._eventTracking=new i("trackEvent"),this._eventTracking.action=function(e,n,i,a,r){r?isNaN(r.duration)&&(r.duration=i):r={duration:i};var s=new t.Telemetry.Event(e,a,r),l=new t.Telemetry.Common.Data(t.Telemetry.Event.dataType,s),c=new t.Telemetry.Common.Envelope(l,t.Telemetry.Event.envelopeType);o.context.track(c)},this._pageTracking=new i("trackPageView"),this._pageTracking.action=function(e,t,n,i,a){o.sendPageViewInternal(e,t,n,i,a)},this._pageVisitTimeManager=new t.Telemetry.PageVisitTimeManager(function(e,t,n){return o.trackPageVisitTime(e,t,n)}),this.config.disableAjaxTracking||new e.ApplicationInsights.AjaxMonitor(this)}return n.prototype.sendPageViewInternal=function(e,n,i,a,o){var r=new t.Telemetry.PageView(e,n,i,a,o),s=new t.Telemetry.Common.Data(t.Telemetry.PageView.dataType,r),l=new t.Telemetry.Common.Envelope(s,t.Telemetry.PageView.envelopeType);this.context.track(l),this._trackAjaxAttempts=0},n.prototype.sendPageViewPerformanceInternal=function(e){var n=new t.Telemetry.Common.Data(t.Telemetry.PageViewPerformance.dataType,e),i=new t.Telemetry.Common.Envelope(n,t.Telemetry.PageViewPerformance.envelopeType);this.context.track(i)},n.prototype.startTrackPage=function(e){try{"string"!=typeof e&&(e=window.document&&window.document.title||""),this._pageTracking.start(e)}catch(e){t._InternalLogging.throwInternalNonUserActionable(t.LoggingSeverity.CRITICAL,new t._InternalLogMessage(t._InternalMessageId.NONUSRACT_StartTrackFailed,"startTrackPage failed, page view may not be collected: "+t.Util.getExceptionName(e),{exception:t.Util.dump(e)}))}},n.prototype.stopTrackPage=function(e,n,i,a){try{"string"!=typeof e&&(e=window.document&&window.document.title||""),"string"!=typeof n&&(n=window.location&&window.location.href||""),this._pageTracking.stop(e,n,i,a),this.config.autoTrackPageVisitTime&&this._pageVisitTimeManager.trackPreviousPageVisit(e,n)}catch(e){t._InternalLogging.throwInternalNonUserActionable(t.LoggingSeverity.CRITICAL,new t._InternalLogMessage(t._InternalMessageId.NONUSRACT_StopTrackFailed,"stopTrackPage failed, page view will not be collected: "+t.Util.getExceptionName(e),{exception:t.Util.dump(e)}))}},n.prototype.trackPageView=function(e,n,i,a,o){try{this._pageViewManager.trackPageView(e,n,i,a,o),this.config.autoTrackPageVisitTime&&this._pageVisitTimeManager.trackPreviousPageVisit(e,n)}catch(e){t._InternalLogging.throwInternalNonUserActionable(t.LoggingSeverity.CRITICAL,new t._InternalLogMessage(t._InternalMessageId.NONUSRACT_TrackPVFailed,"trackPageView failed, page view will not be collected: "+t.Util.getExceptionName(e),{exception:t.Util.dump(e)}))}},n.prototype.startTrackEvent=function(e){try{this._eventTracking.start(e)}catch(e){t._InternalLogging.throwInternalNonUserActionable(t.LoggingSeverity.CRITICAL,new t._InternalLogMessage(t._InternalMessageId.NONUSRACT_StartTrackEventFailed,"startTrackEvent failed, event will not be collected: "+t.Util.getExceptionName(e),{exception:t.Util.dump(e)}))}},n.prototype.stopTrackEvent=function(e,n,i){try{this._eventTracking.stop(e,void 0,n,i)}catch(e){t._InternalLogging.throwInternalNonUserActionable(t.LoggingSeverity.CRITICAL,new t._InternalLogMessage(t._InternalMessageId.NONUSRACT_StopTrackEventFailed,"stopTrackEvent failed, event will not be collected: "+t.Util.getExceptionName(e),{exception:t.Util.dump(e)}))}},n.prototype.trackEvent=function(e,n,i){try{var a=new t.Telemetry.Event(e,n,i),o=new t.Telemetry.Common.Data(t.Telemetry.Event.dataType,a),r=new t.Telemetry.Common.Envelope(o,t.Telemetry.Event.envelopeType);this.context.track(r)}catch(e){t._InternalLogging.throwInternalNonUserActionable(t.LoggingSeverity.CRITICAL,new t._InternalLogMessage(t._InternalMessageId.NONUSRACT_TrackEventFailed,"trackEvent failed, event will not be collected: "+t.Util.getExceptionName(e),{exception:t.Util.dump(e)}))}},n.prototype.trackAjax=function(e,n,i,a,o,r){if(this.config.maxAjaxCallsPerView===-1||this._trackAjaxAttempts<this.config.maxAjaxCallsPerView){var s=new t.Telemetry.RemoteDependencyData(e,n,i,a,o,r),l=new t.Telemetry.Common.Data(t.Telemetry.RemoteDependencyData.dataType,s),c=new t.Telemetry.Common.Envelope(l,t.Telemetry.RemoteDependencyData.envelopeType);this.context.track(c)}else this._trackAjaxAttempts===this.config.maxAjaxCallsPerView&&t._InternalLogging.throwInternalUserActionable(t.LoggingSeverity.CRITICAL,new t._InternalLogMessage(t._InternalMessageId.USRACT_MaxAjaxPerPVExceeded,"Maximum ajax per page view limit reached, ajax monitoring is paused until the next trackPageView(). In order to increase the limit set the maxAjaxCallsPerView configuration parameter."));++this._trackAjaxAttempts},n.prototype.trackException=function(e,n,i,a){try{if(!t.Util.isError(e))try{throw new Error(e)}catch(t){e=t}var o=new t.Telemetry.Exception(e,n,i,a),r=new t.Telemetry.Common.Data(t.Telemetry.Exception.dataType,o),s=new t.Telemetry.Common.Envelope(r,t.Telemetry.Exception.envelopeType);this.context.track(s)}catch(e){t._InternalLogging.throwInternalNonUserActionable(t.LoggingSeverity.CRITICAL,new t._InternalLogMessage(t._InternalMessageId.NONUSRACT_TrackExceptionFailed,"trackException failed, exception will not be collected: "+t.Util.getExceptionName(e),{exception:t.Util.dump(e)}))}},n.prototype.trackMetric=function(e,n,i,a,o,r){try{var s=new t.Telemetry.Metric(e,n,i,a,o,r),l=new t.Telemetry.Common.Data(t.Telemetry.Metric.dataType,s),c=new t.Telemetry.Common.Envelope(l,t.Telemetry.Metric.envelopeType);this.context.track(c)}catch(e){t._InternalLogging.throwInternalNonUserActionable(t.LoggingSeverity.CRITICAL,new t._InternalLogMessage(t._InternalMessageId.NONUSRACT_TrackMetricFailed,"trackMetric failed, metric will not be collected: "+t.Util.getExceptionName(e),{exception:t.Util.dump(e)}))}},n.prototype.trackTrace=function(e,n){try{var i=new t.Telemetry.Trace(e,n),a=new t.Telemetry.Common.Data(t.Telemetry.Trace.dataType,i),o=new t.Telemetry.Common.Envelope(a,t.Telemetry.Trace.envelopeType);this.context.track(o)}catch(e){t._InternalLogging.throwInternalNonUserActionable(t.LoggingSeverity.WARNING,new t._InternalLogMessage(t._InternalMessageId.NONUSRACT_TrackTraceFailed,"trackTrace failed, trace will not be collected: "+t.Util.getExceptionName(e),{exception:t.Util.dump(e)}))}},n.prototype.trackPageVisitTime=function(e,t,n){var i={PageName:e,PageUrl:t};this.trackMetric("PageVisitTime",n,1,n,n,i)},n.prototype.flush=function(){try{this.context._sender.triggerSend()}catch(e){t._InternalLogging.throwInternalNonUserActionable(t.LoggingSeverity.CRITICAL,new t._InternalLogMessage(t._InternalMessageId.NONUSRACT_FlushFailed,"flush failed, telemetry will not be collected: "+t.Util.getExceptionName(e),{exception:t.Util.dump(e)}))}},n.prototype.setAuthenticatedUserContext=function(e,n){try{this.context.user.setAuthenticatedUserContext(e,n)}catch(e){t._InternalLogging.throwInternalUserActionable(t.LoggingSeverity.WARNING,new t._InternalLogMessage(t._InternalMessageId.USRACT_SetAuthContextFailed,"Setting auth user context failed. "+t.Util.getExceptionName(e),{exception:t.Util.dump(e)}))}},n.prototype.clearAuthenticatedUserContext=function(){try{this.context.user.clearAuthenticatedUserContext()}catch(e){t._InternalLogging.throwInternalUserActionable(t.LoggingSeverity.WARNING,new t._InternalLogMessage(t._InternalMessageId.USRACT_SetAuthContextFailed,"Clearing auth user context failed. "+t.Util.getExceptionName(e),{exception:t.Util.dump(e)}))}},n.prototype.SendCORSException=function(n){var i=e.ApplicationInsights.Telemetry.Exception.CreateSimpleException("Script error.","Error","unknown","unknown","The browsers same-origin policy prevents us from getting the details of this exception.The exception occurred in a script loaded from an origin different than the web page.For cross- domain error reporting you can use crossorigin attribute together with appropriate CORS HTTP headers.For more information please see http://www.w3.org/TR/cors/.",0,null);i.properties=n;var a=new t.Telemetry.Common.Data(t.Telemetry.Exception.dataType,i),o=new t.Telemetry.Common.Envelope(a,t.Telemetry.Exception.envelopeType);this.context.track(o)},n.prototype._onerror=function(e,n,i,a,o){try{var r={url:n?n:document.URL};if(t.Util.isCrossOriginError(e,n,i,a,o))this.SendCORSException(r);else{if(!t.Util.isError(o)){var s="window.onerror@"+r.url+":"+i+":"+(a||0);o=new Error(e),o.stack=s}this.trackException(o,null,r)}}catch(e){var l=o?o.name+", "+o.message:"null",c=t.Util.dump(e);t._InternalLogging.throwInternalNonUserActionable(t.LoggingSeverity.CRITICAL,new t._InternalLogMessage(t._InternalMessageId.NONUSRACT_ExceptionWhileLoggingError,"_onerror threw exception while logging error, error will not be collected: "+t.Util.getExceptionName(e),{exception:c,errorString:l}))}},n}();t.AppInsights=n;var i=function(){function e(e){this._name=e,this._events={}}return e.prototype.start=function(e){"undefined"!=typeof this._events[e]&&t._InternalLogging.throwInternalUserActionable(t.LoggingSeverity.WARNING,new t._InternalLogMessage(t._InternalMessageId.USRACT_StartCalledMoreThanOnce,"start was called more than once for this event without calling stop.",{name:this._name,key:e})),this._events[e]=+new Date},e.prototype.stop=function(e,n,i,a){var o=this._events[e];if(isNaN(o))t._InternalLogging.throwInternalUserActionable(t.LoggingSeverity.WARNING,new t._InternalLogMessage(t._InternalMessageId.USRACT_StopCalledWithoutStart,"stop was called without a corresponding start.",{name:this._name,key:e}));else{var r=+new Date,s=t.Telemetry.PageViewPerformance.getDuration(o,r);this.action(e,n,s,i,a)}delete this._events[e],this._events[e]=void 0},e}()}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var AI;!function(e){"use strict";var t=function(e){function t(){this.ver=2,this.properties={},this.measurements={},e.call(this)}return __extends(t,e),t}(e.PageViewData);e.AjaxCallData=t}(AI||(AI={}));var AI;!function(e){"use strict";var t=function(e){function t(){this.ver=2,this.properties={},this.measurements={},e.call(this)}return __extends(t,e),t}(Microsoft.Telemetry.Domain);e.RequestData=t}(AI||(AI={}));var AI;!function(e){"use strict";var t=function(t){function n(){this.ver=2,this.state=e.SessionState.Start,t.call(this)}return __extends(n,t),n}(Microsoft.Telemetry.Domain);e.SessionStateData=t}(AI||(AI={}));var Microsoft;!function(e){var t;!function(t){"use strict";var n=function(){function n(t){t.queue=t.queue||[];var i=t.config||{};if(i&&!i.instrumentationKey)if(i=t,i.iKey)e.ApplicationInsights.Version="0.10.0.0",i.instrumentationKey=i.iKey;else{if(!i.applicationInsightsId)throw new Error("Cannot load Application Insights SDK, no instrumentationKey was provided.");e.ApplicationInsights.Version="0.7.2.0",i.instrumentationKey=i.applicationInsightsId}i=n.getDefaultConfig(i),this.snippet=t,this.config=i}return n.prototype.loadAppInsights=function(){var t=new e.ApplicationInsights.AppInsights(this.config);if(this.config.iKey){var n=t.trackPageView;t.trackPageView=function(e,i,a){n.apply(t,[null,e,i,a])}}var i="logPageView";"function"==typeof this.snippet[i]&&(t[i]=function(e,n,i){t.trackPageView(null,e,n,i)});var a="logEvent";return"function"==typeof this.snippet[a]&&(t[a]=function(e,n,i){t.trackEvent(e,n,i)}),t},n.prototype.emptyQueue=function(){try{if(e.ApplicationInsights.Util.isArray(this.snippet.queue)){for(var n=this.snippet.queue.length,i=0;i<n;i++){var a=this.snippet.queue[i];a()}this.snippet.queue=void 0,delete this.snippet.queue}}catch(n){var o={};n&&"function"==typeof n.toString&&(o.exception=n.toString());var r=new t._InternalLogMessage(t._InternalMessageId.NONUSRACT_FailedToSendQueuedTelemetry,"Failed to send queued telemetry",o);e.ApplicationInsights._InternalLogging.throwInternalNonUserActionable(t.LoggingSeverity.WARNING,r)}},n.prototype.pollInteralLogs=function(t){return setInterval(function(){for(var n=e.ApplicationInsights._InternalLogging.queue,i=n.length,a=0;a<i;a++)t.trackTrace(n[a].message);n.length=0},this.config.diagnosticLogInterval)},n.prototype.addHousekeepingBeforeUnload=function(n){if(!n.config.disableFlushOnBeforeUnload&&"onbeforeunload"in window){var i=function(){n.context._sender.triggerSend(),n.context._sessionManager.backup()};e.ApplicationInsights.Util.addEventHandler("beforeunload",i)||e.ApplicationInsights._InternalLogging.throwInternalNonUserActionable(e.ApplicationInsights.LoggingSeverity.CRITICAL,new t._InternalLogMessage(t._InternalMessageId.NONUSRACT_FailedToAddHandlerForOnBeforeUnload,"Could not add handler for beforeunload"))}},n.getDefaultConfig=function(e){return e||(e={}),e.endpointUrl=e.endpointUrl||"//dc.services.visualstudio.com/v2/track",e.sessionRenewalMs=18e5,e.sessionExpirationMs=864e5,e.maxBatchSizeInBytes=e.maxBatchSizeInBytes>0?e.maxBatchSizeInBytes:1e6,e.maxBatchInterval=isNaN(e.maxBatchInterval)?15e3:e.maxBatchInterval,e.enableDebug=t.Util.stringToBoolOrDefault(e.enableDebug),e.disableExceptionTracking=void 0!==e.disableExceptionTracking&&null!==e.disableExceptionTracking&&t.Util.stringToBoolOrDefault(e.disableExceptionTracking),e.disableTelemetry=t.Util.stringToBoolOrDefault(e.disableTelemetry),e.verboseLogging=t.Util.stringToBoolOrDefault(e.verboseLogging),e.emitLineDelimitedJson=t.Util.stringToBoolOrDefault(e.emitLineDelimitedJson),e.diagnosticLogInterval=e.diagnosticLogInterval||1e4,e.autoTrackPageVisitTime=t.Util.stringToBoolOrDefault(e.autoTrackPageVisitTime),(isNaN(e.samplingPercentage)||e.samplingPercentage<=0||e.samplingPercentage>=100)&&(e.samplingPercentage=100),e.disableAjaxTracking=void 0!==e.disableAjaxTracking&&null!==e.disableAjaxTracking&&t.Util.stringToBoolOrDefault(e.disableAjaxTracking),e.maxAjaxCallsPerView=isNaN(e.maxAjaxCallsPerView)?500:e.maxAjaxCallsPerView,e.disableCorrelationHeaders=void 0===e.disableCorrelationHeaders||null===e.disableCorrelationHeaders||t.Util.stringToBoolOrDefault(e.disableCorrelationHeaders),e.disableFlushOnBeforeUnload=void 0!==e.disableFlushOnBeforeUnload&&null!==e.disableFlushOnBeforeUnload&&t.Util.stringToBoolOrDefault(e.disableFlushOnBeforeUnload),e},n}();t.Initialization=n}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));var Microsoft;!function(e){var t;!function(t){"use strict";try{if("undefined"!=typeof window&&"undefined"!=typeof JSON){var n="appInsights";if(void 0===window[n])e.ApplicationInsights.AppInsights.defaultConfig=e.ApplicationInsights.Initialization.getDefaultConfig();else{var i=window[n]||{},a=new e.ApplicationInsights.Initialization(i),o=a.loadAppInsights();for(var r in o)i[r]=o[r];a.emptyQueue(),a.pollInteralLogs(o),a.addHousekeepingBeforeUnload(o)}}}catch(t){e.ApplicationInsights._InternalLogging.warnToConsole("Failed to initialize AppInsights JS SDK: "+t.message)}}(t=e.ApplicationInsights||(e.ApplicationInsights={}))}(Microsoft||(Microsoft={}));